"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{1361:function(e,o,r){r.d(o,{TM:function(){return y}});var s=r(5893),n=r(8462),t=r(7212),a=r(8619),i=r(9334),d=r(7922),c=r(8078),l=r(7294),h=r(7357),x=r(5054),p=r(8059),m=r(1057),u=r(5861),g=r(7400),b=r(629),j=r(8456);function f(e){console.log("page: "+e.page),console.log("manage: "+e.manage),e.manage,(0,p.X)("https://danspizza-api.azurewebsites.net/api/Order/OrderPage","POST",e.page,{"Content-Type":"application/json"}).catch(o=>{console.log("API error: "+o.message),e.setOrderPagePosted(!1)}).then(o=>{console.log("data"),console.log("data: "+JSON.stringify(o)),e.setOrders(o),console.log("data end: "+JSON.stringify(o)),e.setOpen(o.map(e=>({isOpen:!1,orderID:e.orderID}))),e.setOrderPagePosted(!1),console.log("data end: "+JSON.stringify(o))}).catch(o=>{console.log("React fetch error: "+o),e.setError("React fetch error: "+o.message),e.setOrderPagePosted(!1)})}function Z(e){(0,p.X)("https://danspizza-api.azurewebsites.net/api/Order/Fulfill","POST",e.fulfillPosted,{"Content-Type":"application/json"}).catch(o=>{console.log("API error: "+o.message),e.setFulfillPosted(!1)}).then(o=>(e.setOpen(o.map(e=>({isOpen:!1,orderID:e.orderID}))),e.setFulfillPosted(!1),e.setOrders(o),o)).catch(o=>{console.log("React fetch error: "+o),e.setError("React fetch error: "+o.message),e.setFulfillPosted(!1)})}function y(e){let{userOrders:o,active:r,orderCount:p,manage:y}=e,[O,w]=(0,l.useState)(o.map(e=>({isOpen:!1,orderID:e.orderID}))),[S,P]=(0,l.useState)(1),[k,I]=(0,l.useState)(1),[D,v]=(0,l.useState)(!1),[N,C]=(0,l.useState)(null),[R,E]=(0,l.useState)(o),[z,A]=(0,l.useState)(!1);console.log("order count: "+p);let F=(e,o)=>{I(o),v(!0)};return(0,s.jsxs)(b.Z,{elevation:5,sx:{mx:{sm:2,md:15},mb:3},children:[(0,s.jsxs)(n.Z,{sx:{bgcolor:"background.beige",p:2},component:"div","aria-labelledby":"nested-list-subheader",disablePadding:!0,children:[D?(0,s.jsx)(h.Z,{sx:{width:"100%",height:"600px",top:"50%",transform:"translateY(+50%)"},children:(0,s.jsx)(h.Z,{children:(0,s.jsx)(j.Z,{})})}):R.map(e=>{let o,r,l,x,p,b;return(0,s.jsx)(h.Z,{sx:z&&{pointerEvents:"none"},children:S===e.orderID&&z?(0,s.jsx)(c.Z,{variant:"rounded",width:"100%",height:"95px",sx:{mt:2}}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{sx:S===e.orderID?{boxShadow:1,borderRadius:1,mt:2}:{boxShadow:3,borderRadius:1,mt:2,bgcolor:"background.lightest"},selected:S===e.orderID,onClick:o=>{var r;console.log("food: "+(r=e.orderID)),console.log("open: "+JSON.stringify(O)),P(r),w(O.map(e=>e.orderID===r?{...e,isOpen:e.isOpen=!e.isOpen}:{...e,isOpen:e.isOpen=e.isOpen}))},component:"div",children:(0,s.jsx)(i.Z,{className:"account-item",primary:(0,s.jsxs)(g.Z,{container:!0,children:[(0,s.jsx)(g.Z,{xs:9,md:10,children:(0,s.jsx)(h.Z,{sx:{my:"auto"},children:(o=e.created,r=new Date(o+"Z"),x=Math.floor((l=new Date(Date.now())-r)/864e5),p=Math.floor(l/36e5),b=Math.floor(l/6e4),x>7?r.toLocaleDateString("us-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):x>0?1===x?x+" day ago":x+" days ago":p>0?1===p?p+" hour ago":p+" hours ago":b>0?1===b?b+" minute ago":b+" minutes ago":"seconds ago")})}),y&&(0,s.jsx)(g.Z,{xs:3,md:1,children:(0,s.jsx)(m.Z,{disabled:z,variant:"contained",onClick:o=>{var r;o.stopPropagation(),P(r=e.orderID),A(r)},children:"Fulfill"})})]}),secondary:(0,s.jsxs)(g.Z,{container:!0,children:[(0,s.jsx)(g.Z,{xs:9,children:(0,s.jsxs)(h.Z,{className:"account-item",textAlign:"left",children:[(0,s.jsx)("b",{children:e.totalPrice.toLocaleString("us-US",{style:"currency",currency:"USD"})})," - ",e.foodItems.map(e=>e.foodName).join(", ")]})}),(0,s.jsx)(g.Z,{xs:3,children:(0,s.jsxs)(h.Z,{sx:{my:"auto",display:{xs:"none",md:"block"}},children:[(0,s.jsx)("b",{children:e.account.firstName}),": ",e.account.phone]})})]}),secondaryTypographyProps:{component:"div",mt:1}})}),(0,s.jsx)(d.Z,{in:O.find(o=>o.orderID==e.orderID).isOpen,timeout:"auto",unmountOnExit:!0,children:(0,s.jsxs)(n.Z,{component:"div",children:[y&&(0,s.jsx)(h.Z,{sx:{mt:1,ml:2,width:"95%",boxShadow:3,borderRadius:1,backgroundColor:"#f2f2ed"},children:(0,s.jsx)(t.ZP,{children:(0,s.jsx)(i.Z,{primary:(0,s.jsxs)(g.Z,{container:!0,textAlign:"center",children:[(0,s.jsxs)(g.Z,{xs:6,md:1,children:[(0,s.jsx)(u.Z,{sx:{fontWeight:700},children:"ID"}),(0,s.jsx)(u.Z,{children:e.account.userID})]}),(0,s.jsxs)(g.Z,{xs:6,md:3,children:[(0,s.jsx)(u.Z,{sx:{fontWeight:700},children:"Name"}),(0,s.jsxs)(u.Z,{children:[e.account.firstName," ",e.account.lastName]})]}),(0,s.jsxs)(g.Z,{xs:6,md:4,children:[(0,s.jsx)(u.Z,{sx:{fontWeight:700},children:"Phone"}),(0,s.jsx)(u.Z,{sx:{whiteSpace:"nowrap",overflow:"auto hidden","&::-webkit-scrollbar":{height:10,WebkitAppearance:"none"},"&::-webkit-scrollbar-thumb":{borderRadius:8,border:"2px solid",borderColor:"background.lightest",backgroundColor:"background.beige"}},children:e.account.phone})]}),(0,s.jsxs)(g.Z,{xs:6,md:4,children:[(0,s.jsx)(u.Z,{sx:{fontWeight:700},children:"Email"}),(0,s.jsx)(u.Z,{sx:{overflow:"auto hidden","&::-webkit-scrollbar":{height:10,WebkitAppearance:"none"},"&::-webkit-scrollbar-thumb":{borderRadius:8,border:"2px solid",borderColor:"background.lightest",backgroundColor:"background.beige"}},children:e.account.email})]})]})})})}),e.foodItems.map((e,o)=>(0,s.jsx)(h.Z,{sx:o%2==1?{mt:1,ml:2,width:"95%",boxShadow:3,borderRadius:1,backgroundColor:"#f2f2ed"}:{mt:1,ml:2,width:"95%",boxShadow:3,borderRadius:1,backgroundColor:"#f0f2e6"},children:(0,s.jsx)(t.ZP,{sx:{pl:3,py:2},children:(0,s.jsx)(i.Z,{className:"account-item",primary:(0,s.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,s.jsx)("div",{children:e.foodName}),(0,s.jsx)("div",{children:e.price&&e.price.toLocaleString("us-US",{style:"currency",currency:"USD"})})]}),secondary:(0,s.jsx)(h.Z,{children:e.customizeOptions.map(e=>(0,s.jsxs)("div",{className:"option-group",children:[(0,s.jsx)("div",{className:"option-name",children:e.optionName+": "}),(0,s.jsx)("div",{className:"option-items",children:e.optionItems.map(e=>e.customizeOptionItem).join(", ")})]},e.orderItemOptionID))}),secondaryTypographyProps:{component:"div"}})})},e.orderItemID))]})})]})},e.orderID)}),0===R.length&&r&&(0,s.jsx)(a.Z,{sx:{boxShadow:3,borderRadius:1,mx:2,mt:2,bgcolor:"background.lightest"},children:(0,s.jsx)(i.Z,{primary:(0,s.jsx)(u.Z,{children:"No Active Orders"})})}),0===R.length&&!r&&(0,s.jsx)(a.Z,{sx:{boxShadow:3,borderRadius:1,mx:2,mt:2,bgcolor:"background.lightest"},children:(0,s.jsx)(i.Z,{primary:(0,s.jsx)(u.Z,{children:"No Past Orders"})})}),!r&&p>5&&(0,s.jsx)(x.Z,{sx:{mt:1},count:Math.ceil(p/5),page:k,onChange:F})]}),(0,s.jsxs)(h.Z,{children:[D&&(0,s.jsx)(f,{page:k,setOrders:e=>E(e),setOpen:e=>w(e),setError:e=>C(e),setOrderPagePosted:e=>v(e),manage:y}),z&&(0,s.jsx)(Z,{setError:e=>C(e),setOpen:e=>w(e),fulfillPosted:z,setFulfillPosted:e=>A(e),setOrders:e=>E(e)}),N&&(0,s.jsx)("div",{children:N})]})]})}}}]);