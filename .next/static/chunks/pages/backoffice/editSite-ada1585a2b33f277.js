(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[896],{6425:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backoffice/editSite",function(){return t(1391)}])},1391:function(e,o,t){"use strict";t.r(o),t.d(o,{OptionItemsForFood:function(){return J},SelectCustomizeOptions:function(){return A},__N_SSP:function(){return w},default:function(){return D}});var s=t(5893),n=t(7357),i=t(1703),r=t(44),d=t(4102),l=t(4871),a=t(5697),c=t.n(a),m=t(5861),x=t(2491),p=t(7294),u=t(8059),h=t(7400),f=t(8619),g=t(9334),I=t(8462);function j(e){return console.log("select food props: "+JSON.stringify(e)),(0,s.jsx)(n.Z,{sx:{minWidth:120},children:(0,s.jsx)(l.Z,{disablePortal:!0,id:"combo-box-demo",options:e.foodItems.map(e=>({foodID:e.foodID,foodName:e.foodName})),sx:{width:300},renderInput:e=>(0,s.jsx)(d.Z,{...e,label:"Customize Options"}),getOptionLabel:e=>"string"==typeof e?e:e.foodName,isOptionEqualToValue:(e,o)=>e.id===o.id,onChange:(o,t)=>{e.setSelectedFoodItem(t),e.setOptionItemsPosted(!0),console.log("handlechange target value: "+JSON.stringify(t))}})})}function O(e){return console.log("select food props: "+JSON.stringify(e)),(0,s.jsx)(n.Z,{sx:{minWidth:120},children:(0,s.jsx)(l.Z,{disablePortal:!0,id:"combo-box-demo",options:e.foodItems.map(e=>({foodID:e.foodID,foodName:e.foodName})),sx:{width:300},renderInput:e=>(0,s.jsx)(d.Z,{...e,label:"Food Items"}),getOptionLabel:e=>"string"==typeof e?e:e.foodName,isOptionEqualToValue:(e,o)=>e.id===o.id,onChange:(o,t)=>{e.setSelectedFoodItem(t),e.setOptionItemsPosted(!0),console.log("handlechange target value: "+JSON.stringify(t))}})})}function S(e){return console.log("select food props: "+JSON.stringify(e)),(0,s.jsx)(n.Z,{sx:{minWidth:120},children:(0,s.jsx)(l.Z,{disablePortal:!0,id:"combo-box-demo",options:e.foodItems.map(e=>({foodID:e.foodID,foodName:e.foodName})),sx:{width:300},renderInput:e=>(0,s.jsx)(d.Z,{...e,label:"Menu Categories"}),getOptionLabel:e=>"string"==typeof e?e:e.foodName,isOptionEqualToValue:(e,o)=>e.id===o.id,onChange:(o,t)=>{e.setSelectedFoodItem(t),e.setOptionItemsPosted(!0),console.log("handlechange target value: "+JSON.stringify(t))}})})}function Z(e){console.log("fetching food item: "+e.foodID);let o={"Content-Type":"application/json",Authorization:"Bearer "+(0,x.e)("token")};(0,u.X)("https://danspizza-api.azurewebsites.net/api/EditMenu/OptionItems/Get","POST",e.foodID,o).catch(o=>{console.log("API error: "+o),console.log("API error: "+o.message),console.log("API error: "+JSON.parse(o)),console.log("API error: "+JSON.parse(o.message)),console.log("API error: "+JSON.parse(o.message).message),e.setError("API error: "+JSON.parse(o.message).message),e.setOptionItemsPosted(!1)}).then(o=>{console.log("option items: "+JSON.stringify(o)),e.setFoodOptionItems(o);let t=[];new Set(o.map(e=>e.customizeOption)).forEach(e=>t.push(e)),e.setFoodOptions(t),e.setOptionItemsPosted(!1)}).catch(o=>{console.log("React fetch error: "+o),e.setError("React fetch error: "+o.message),e.setOptionItemsPosted(!1)})}c().node,c().number.isRequired,c().number.isRequired;let b={boxShadow:1,borderRadius:1,my:1,opacity:1},N={boxShadow:3,borderRadius:1,my:1,opacity:.75};function y(e){let[o,t]=(0,p.useState)(""),[i,r]=(0,p.useState)(""),[d,l]=(0,p.useState)([]),[a,c]=(0,p.useState)([{}]),[x,u]=(0,p.useState)(!1),[y,P]=(0,p.useState)(null),[C,w]=(0,p.useState)(0),[J,A]=(0,p.useState)(0);return console.log("selectedFoodItem is: "+JSON.stringify(o)+". optionItemsPosted is "+x),console.log("food items: "+JSON.stringify(e.foodItems)),console.log("options: "+JSON.stringify(e.customizeOptions)),(0,s.jsxs)(h.Z,{container:!0,children:[(0,s.jsx)(h.Z,{xs:2,sx:{borderRight:1,borderColor:"divider"},children:(0,s.jsxs)(I.Z,{sx:{pr:2},children:[(0,s.jsx)(f.Z,{sx:4===C?b:N,selected:4===C,onClick:e=>w(4),children:(0,s.jsx)(g.Z,{primary:"Batch",sx:{textAlign:"center"}})}),(0,s.jsx)(f.Z,{sx:1===C?b:N,selected:1===C,onClick:e=>w(1),children:(0,s.jsx)(g.Z,{primary:"Categories",sx:{textAlign:"center"}})}),(0,s.jsx)(f.Z,{sx:2===C?b:N,selected:2===C,onClick:e=>w(2),children:(0,s.jsx)(g.Z,{primary:"Food",sx:{textAlign:"center"}})}),(0,s.jsx)(f.Z,{sx:3===C?b:N,selected:3===C,onClick:e=>w(3),children:(0,s.jsx)(g.Z,{primary:"Customize",sx:{textAlign:"center"}})})]})}),(0,s.jsxs)(h.Z,{xs:10,sx:{pl:2},children:[1==C&&(0,s.jsxs)(n.Z,{sx:{mx:"auto",width:"50%"},children:[(0,s.jsx)(S,{setOptionItemsPosted:e=>u(e),foodItems:e.foodItems,setSelectedFoodItem:e=>t(e)}),o&&(0,s.jsxs)(n.Z,{children:["Food Item set to ",o.foodName]})]}),2==C&&(0,s.jsxs)(n.Z,{sx:{mx:"auto",width:"50%"},children:[(0,s.jsx)(O,{setOptionItemsPosted:e=>u(e),foodItems:e.foodItems,setSelectedFoodItem:e=>t(e)}),o&&(0,s.jsxs)(n.Z,{sx:{mx:"auto",width:"100%"},children:[(0,s.jsx)(n.Z,{children:a&&d.map((e,o)=>(0,s.jsx)("div",{children:e},o))}),y&&(0,s.jsx)(n.Z,{children:y}),x&&o&&(0,s.jsx)(Z,{foodID:o.foodID,foodOptions:d,setOptionItemsPosted:e=>u(e),setFoodOptionItems:e=>c(e),setFoodOptions:e=>l(e),setError:e=>P(e)})]})]}),3==C&&(0,s.jsx)(n.Z,{sx:{mx:"auto",width:"50%"},children:(0,s.jsx)(j,{setOptionItemsPosted:e=>u(e),foodItems:e.foodItems,setSelectedFoodItem:e=>t(e)})}),4==C&&(0,s.jsx)(m.Z,{sx:{my:"auto"},children:"Batch Upload"})]})]})}var P=t(4386);function C(e){let{title:o}=e;return(0,s.jsx)("h1",{className:"header-styles",children:o||"Default title"})}var w=!0;function J(e){console.log("fetching food item: "+e.foodID);let o={"Content-Type":"application/json",Authorization:"Bearer "+(0,x.e)("token")};(0,u.X)("https://danspizza-api.azurewebsites.net/api/EditMenu/OptionItems/Get","POST",e.foodID,o).catch(o=>{console.log("API error: "+o),console.log("API error: "+o.message),console.log("API error: "+JSON.parse(o)),console.log("API error: "+JSON.parse(o.message)),console.log("API error: "+JSON.parse(o.message).message),e.setError("API error: "+JSON.parse(o.message).message),e.setOptionItemsPosted(!1)}).then(o=>{console.log("option items: "+JSON.stringify(o)),e.setFoodOptionItems(o);let t=[];new Set(o.map(e=>e.customizeOption)).forEach(e=>t.push(e)),e.setFoodOptions(t),e.setOptionItemsPosted(!1)}).catch(o=>{console.log("React fetch error: "+o),e.setError("React fetch error: "+o.message),e.setOptionItemsPosted(!1)})}function A(e){return console.log("options: "+JSON.stringify(e.customizeOptions)),(0,s.jsx)(n.Z,{sx:{minWidth:120},children:(0,s.jsx)(l.Z,{disablePortal:!0,id:"combo-box-demo",options:e.customizeOptions.map(e=>({optionID:e.optionID,optionName:e.optionName})),sx:{width:300},renderInput:e=>(0,s.jsx)(d.Z,{...e,label:"Options"}),getOptionLabel:e=>"string"==typeof e?e:e.optionName,onChange:(o,t)=>{e.setSelectedOption(t),console.log("handlechange target value: "+JSON.stringify(t))}})})}function E(e){let{children:o,value:t,index:i,...r}=e;return console.log("index: "+i),(0,s.jsx)("div",{role:"tabpanel",hidden:t!==i,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i),...r,children:t===i&&(0,s.jsx)(n.Z,{sx:{p:3},children:(0,s.jsx)(m.Z,{component:"div",children:o})})})}function F(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}E.propTypes={children:c().node,index:c().number.isRequired,value:c().number.isRequired};let z={boxShadow:1,borderRadius:1,my:1,opacity:1},v={boxShadow:3,borderRadius:1,my:1,opacity:.75};function D(e){let[o,t]=(0,p.useState)(""),[d,l]=(0,p.useState)(""),[a,c]=(0,p.useState)([]),[x,u]=(0,p.useState)([{}]),[j,O]=(0,p.useState)(!1),[S,Z]=(0,p.useState)(null),[b,N]=(0,p.useState)(0),[w,A]=(0,p.useState)(0),D=(e,o)=>{N(o)};return console.log("selectedFoodItem is: "+JSON.stringify(o)+". optionItemsPosted is "+j),console.log("food items: "+JSON.stringify(e.items.foodItems)),console.log("options: "+JSON.stringify(e.items.customizeOptions)),(0,s.jsxs)(n.Z,{textAlign:"center",children:[(0,s.jsx)(C,{title:"Edit Site"}),(0,s.jsx)(P.Z,{title:"Edit Site Disabled",followCursor:!0,children:(0,s.jsx)(n.Z,{children:(0,s.jsxs)(h.Z,{container:!0,textAlign:"center",sx:{px:5,pointerEvents:"none",opacity:"0.4"},children:[(0,s.jsx)(h.Z,{xs:12,children:(0,s.jsx)(n.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,s.jsxs)(i.Z,{value:b,onChange:D,"aria-label":"basic tabs example",children:[(0,s.jsx)(r.Z,{label:"Edit Home",...F(0),sx:{fontSize:"1rem"}}),(0,s.jsx)(r.Z,{label:"Edit Menu",...F(1),sx:{fontSize:"1rem"}})]})})}),(0,s.jsx)(h.Z,{xs:12,children:(0,s.jsx)(E,{value:b,index:0,children:(0,s.jsxs)(h.Z,{container:!0,children:[(0,s.jsx)(h.Z,{xs:5,sm:3,md:2,sx:{borderRight:1,borderColor:"divider"},children:(0,s.jsxs)(I.Z,{sx:{p:1},children:[(0,s.jsx)(f.Z,{sx:1===w?z:v,selected:1===w,onClick:e=>A(1),children:(0,s.jsx)(g.Z,{primary:"Coupons",sx:{textAlign:"center"}})}),(0,s.jsx)(f.Z,{sx:2===w?z:v,selected:2===w,onClick:e=>A(2),children:(0,s.jsx)(g.Z,{primary:"Blurb",sx:{textAlign:"center"}})}),(0,s.jsx)(f.Z,{sx:3===w?z:v,selected:3===w,onClick:e=>A(3),children:(0,s.jsx)(g.Z,{primary:"News",sx:{textAlign:"center"}})})]})}),(0,s.jsxs)(h.Z,{xs:7,sm:9,md:10,children:[1==w&&(0,s.jsx)(m.Z,{sx:{my:"auto"},children:"Current Coupons"}),2==w&&(0,s.jsx)(m.Z,{sx:{my:"auto"},children:"Current Blurb"}),3==w&&(0,s.jsx)(m.Z,{sx:{my:"auto"},children:"Current News"})]})]})})}),(0,s.jsxs)(h.Z,{xs:12,children:[(0,s.jsx)(E,{value:b,index:1,children:(0,s.jsx)(y,{foodItems:e.items.foodItems})}),S&&(0,s.jsx)(n.Z,{children:S}),j&&o&&(0,s.jsx)(J,{foodID:o.foodID,foodOptions:a,setOptionItemsPosted:e=>O(e),setFoodOptionItems:e=>u(e),setFoodOptions:e=>c(e),setError:e=>Z(e)})]})]})})})]})}}},function(e){e.O(0,[613,774,888,179],function(){return e(e.s=6425)}),_N_E=e.O()}]);