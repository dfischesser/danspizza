(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{9696:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backoffice/sales",function(){return a(3342)}])},3342:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return p},default:function(){return f}});var n=a(5893),s=a(7357),o=a(3148),r=a(5430),l=a(7294),c=a(1057),i=a(6863);function d(e){fetch("https://danspizza-api.azurewebsites.net/api/Sales/Daily?days="+e.period,{"content-Type":"application/json"}).catch(t=>{console.log("API error: "+JSON.stringify(t.message)),e.setDataPosted(!1)}).then(e=>e.json()).then(t=>{console.log("handleFetch login data: "+JSON.stringify(t)),e.setPrice(t.sales.reduce((e,t)=>[...e,t.price],[])),e.setLabels(t.sales.map(e=>e.foodType+" ("+e.amount+")")),e.setDataPosted(!1)}).catch(t=>{console.log("React fetch error: "+t.message),e.setError(t.message),e.setDataPosted(!1)})}function u(e){let[t,a]=(0,l.useState)(1),[u,p]=(0,l.useState)(!1),[f,g]=(0,l.useState)(null),[h,y]=(0,l.useState)(e.data.reduce((e,t)=>[...e,t.price],[])),[b,m]=(0,l.useState)(e.data.map(e=>e.foodType+" ("+e.amount+")")),x=e.data.reduce((e,t)=>[...e,t.foodType],[]),_=e.data.reduce((e,t)=>[...e,t.amount],[]);console.log("sales: "+x),console.log("amount: "+_),console.log("price: "+h),console.log("label: "+e.data.map(e=>e.foodType+" ("+e.amount+")")),o.kL.register(o.uw,o.f$,o.ZL,o.vn,o.Dx,o.De,o.u);let k=()=>{a(1),p(!0)},S=()=>{a(7),p(!0)},j=()=>{a(30),p(!0)};return(0,n.jsxs)(s.Z,{sx:{p:5},children:[(0,n.jsxs)(i.Z,{sx:{mb:5},variant:"contained","aria-label":"outlined primary button group",children:[(0,n.jsx)(c.Z,{onClick:k,children:"Day"}),(0,n.jsx)(c.Z,{onClick:S,children:"Week"}),(0,n.jsx)(c.Z,{onClick:j,children:"Month"})]}),(0,n.jsx)(r.kL,{type:"bar",options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Sales By Menu Category"},tooltip:{callbacks:{label:function(e){let t=e.dataset.label||"";return t&&(t+=": "),null!==e.parsed.y&&(t+=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.parsed.y)),t}}}},scales:{y:{beginAtZero:!0}}},data:{type:"bar",labels:b,datasets:[{label:"Price",data:h,borderWidth:1,backgroundColor:"#084c63"}]}}),u&&(0,n.jsx)(d,{period:t,setLabels:e=>m(e),setPrice:e=>y(e),setDataPosted:e=>p(e),setError:e=>g(e)}),f&&(0,n.jsx)(s.Z,{children:f})]})}var p=!0;function f(e){let t=e.data.sales;return console.log("manage orders rendered."),(0,n.jsx)(s.Z,{textAlign:"center",children:(0,n.jsx)(u,{data:t})})}}},function(e){e.O(0,[196,602,774,888,179],function(){return e(e.s=9696)}),_N_E=e.O()}]);